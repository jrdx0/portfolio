---
import Hero from '../components/Hero.astro';
import Projects from '../components/Projects.astro';
import Layout from '../layouts/Layout.astro';
import Navigator from '../components/Navigator.astro';
import Experience from '../components/Experience.astro';
---

<Layout>
  <header id="header" class="fixed top-0 z-10 w-full py-6">
    <Navigator />
  </header>
  <main>
    <Hero />
    <Projects />
    <Experience />
  </main>
</Layout>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const tlHero = gsap.timeline({
    defaults: { ease: 'power2.out' },
    scrollTrigger: {
      trigger: '#me',
      start: 'top 80%',
      end: 'top 50%',
      toggleActions: 'play none none reverse',
    },
  });

  const tlExperience = gsap.timeline({
    defaults: { ease: 'power2.out' },
    scrollTrigger: {
      trigger: '#experience',
      start: 'top 80%',
      end: 'top 50%',
      toggleActions: 'play none none reverse',
    },
  });

  tlHero
    .from('#greetings', {
      x: -100,
      opacity: 0,
      duration: 1,
      display: 'inline-block',
      delay: 0.5,
    })
    .from('#name', {
      opacity: 0,
      duration: 1,
    })
    .from('#title', {
      opacity: 0,
      y: 40,
      duration: 1,
    })
    .from('#social-networks', {
      opacity: 0,
      duration: 1,
      delay: 0.5,
    });

  gsap.from('#projects', {
    opacity: 0,
    y: 100,
    duration: 1,
    scrollTrigger: {
      trigger: '#projects',
      start: 'top 80%',
      end: 'top 50%',
      toggleActions: 'play none none reverse',
    },
  });

  tlExperience
    .from('#experience header', {
      opacity: 0,
      duration: 1,
    })
    .from('#experience-timeline > li', {
      opacity: 0,
      x: -100,
      duration: 1,
      stagger: 0.5,
    })
    .from('#experience-line', {
      opacity: 0,
      duration: 1,
    });
</script>
